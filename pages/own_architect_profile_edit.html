<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/CSS/universe.css" />
    <link rel="stylesheet" href="../assets/CSS/architect_apply_form.css" />
    <title>architect edit form</title>
</head>

<body>

    <section class="all-form">
        <form id="architectForm3">
            <div class="full_form">
                <div class="form">
                    <h2>personal information</h2>
                    <label for="image">Photo:</label>
                    <input type="url" required id="userImage" name="image" placeholder="Profileimage" />
                    <br />
                    <br />
                    <label>Name:</label>
                    <input type="text" required id="userName" placeholder="John robert" />
                    <br />
                    <br />
                    <label>Gender:</label>
                    <input type="text" list="Gender" required id="userGender" placeholder="Male/Female" />
                    <datalist id="Gender">
                        <option value="Male">
                        <option value="Female">
                        <option value="Trans gender">
                        <option value="Others">

                    </datalist>
                    <br />
                    <br />
                    <label>Phone number:</label>
                    <input type="tel" required id="userPhoneNumber" placeholder="9218457240" />
                    <br />
                    <br />
                    <label>Address:</label>
                    <input type="text" required id="userAddress" />
                    <br />
                    <br />
                    <label for="image">Cover Photo:</label>
                    <input type="url" id="userCoverPhoto" required name="image" placeholder="Cover photo design" />
                    <br />
                    <br />

                </div>
                <div class="form">
                    <h2>professional information</h2>
                    <label>Email:</label>
                    <input type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                        title="Make sure email should be in the correct pattern" required id="userEmail"
                        placeholder="abc@gmail.com" disabled />
                    <br />
                    <br />
                    <!-- <label>Password:</label>
                    <input type="text" pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=\S+$).{8,}$"
                        title="Must contain at least one number and one uppercase and lowercase letter,at least 8 or more characters and must not contain space "
                        required id="userPassword" />
                    <br />
                    <br /> -->
                    <label>Education:</label>
                    <input type="text" required id="userEducation" placeholder="Bachelor of architects" />
                    <br />
                    <br />
                    <label>Experience:</label>
                    <input type="text" required id="userExperience" placeholder="2 years" />
                    <br />
                    <br />

                    <label for="image">Degree Certificate:</label>
                    <input type="url" required id="userDocument" name="image" placeholder="Profileimage" />
                    <br />
                    <br />

                    <label for="image">NATA certificate:</label>
                    <input type="url" required id="userNataCertificate" name="image" placeholder="Profileimage" />
                    <br />
                    <br />

                    <!-- <label for="image">model design:</label>
                    <input type="url" required id="userModelDesign" name="image"
                        placeholder="Profileimage" /><br /><br />
                    <br /> -->

                    <div class="submit">

                        <button type="submit" class="submit_btn">Submit</button>

                    </div>
                </div>
            </div>

        </form>

    </section>


    <script>


        const singleData = JSON.parse(localStorage.getItem("Single_Data"));
        const arcInfo = JSON.parse(localStorage.getItem("personArchitect"))


        let oneArchitect = arcInfo.find(function (event) {
            let arcEmail = event["arcEmail"];
            if (singleData == arcEmail) {
                return true;
            }
        });

        console.log(oneArchitect);

        const url = document.getElementById("userImage").value = oneArchitect["arcUrl"];
        const name = document.getElementById("userName").value = oneArchitect["arcName"];
        const gender = document.getElementById("userGender").value = oneArchitect["arcGender"];
        const phoneNumber = document.getElementById("userPhoneNumber").value = oneArchitect["arcPhoneNumber"];
        const address = document.getElementById("userAddress").value = oneArchitect["arcAddress"];
        const coverPhoto = document.getElementById("userCoverPhoto").value = oneArchitect["arcCoverPhoto"];
        const education = document.getElementById("userEducation").value = oneArchitect["arcEducation"];
        const experience = document.getElementById("userExperience").value = oneArchitect["arcExperience"];
        const email = document.getElementById("userEmail").value = oneArchitect["arcEmail"];
        // const password = document.getElementById("userPassword").value = oneArchitect["arcPassword"];
        const graduatedocument = document.getElementById("userDocument").value = oneArchitect["arcDocument"];
        const natacertificate = document.getElementById("userNataCertificate").value = oneArchitect["arcNataCertificate"];
        // const modelDesign = document.getElementById("userModelDesign").value = oneArchitect["arcModelDesign"];

        // edit page function
        let complete = document.getElementById("architectForm3");


        console.log(complete);

        complete.addEventListener("submit", function (event) {
            event.preventDefault();
            // get data from edit form
            let arcUrl = document.getElementById("userImage").value;
            let arcName = document.getElementById("userName").value;
            let arcGender = document.getElementById("userGender").value;
            let arcPhoneNumber = document.getElementById("userPhoneNumber").value;
            let arcAddress = document.getElementById("userAddress").value;
            let arcCoverPhoto = document.getElementById("userCoverPhoto").value;
            let arcEducation = document.getElementById("userEducation").value;
            let arcExperience = document.getElementById("userExperience").value;
            let arcEmail = document.getElementById("userEmail").value;
            // let arcPassword = document.getElementById("userPassword").value;
            let arcDocument = document.getElementById("userDocument").value;
            let arcNataCertificate = document.getElementById("userNataCertificate").value;
            // let arcModelDesign = document.getElementById("userModelDesign").value;


            let architectUser_data = {
                arcUrl,
                arcName,
                arcGender,
                arcPhoneNumber,
                arcAddress,
                arcCoverPhoto,
                arcEducation,
                arcExperience,
                arcEmail,
                // arcPassword,
                arcDocument,
                arcNataCertificate,
                // arcModelDesign,
            };



            let architectData = JSON.parse(localStorage.getItem("personArchitect"));
            let lastData = architectData.find((i) => i.arcEmail == arcEmail);
            let convert = Object.assign(lastData, architectUser_data);
            console.log(convert);
            let index = architectData.indexOf(lastData);
            architectData[index] = convert;
            localStorage.setItem("personArchitect", JSON.stringify(architectData));
            window.location.href = "./own_architect_profile.html";

        });

    </script>
</body>

</html>